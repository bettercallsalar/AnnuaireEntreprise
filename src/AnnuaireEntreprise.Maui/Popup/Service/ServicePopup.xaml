<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="AnnuaireEntreprise.Maui.Views.ServicePopup"
               Size="400,600">
    <ScrollView>
        <VerticalStackLayout Padding="20"
                             Spacing="20"
                             BackgroundColor="#FFFFFF">
            <!-- Title -->
            <Label Text="Manage Services"
                   FontSize="24"
                   FontAttributes="Bold"
                   TextColor="#333"
                   HorizontalOptions="Center"/>

            <!-- Add New Service -->
            <VerticalStackLayout Spacing="10">
                <Label Text="Add New Service"
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="#007AFF"/>
                <Entry Placeholder="Enter Service"
                       Text="{Binding NewServiceName}"
                       FontSize="16"
                       BackgroundColor="#F8F8F8"
                       Margin="0,5"/>
                <Button Text="Add Service"
                        Command="{Binding AddServiceCommand}"
                        BackgroundColor="#28A745"
                        TextColor="White"
                        WidthRequest="150"
                        CornerRadius="10"
                        HorizontalOptions="Start"/>
            </VerticalStackLayout>

            <!-- Separator -->
            <BoxView HeightRequest="1"
                     BackgroundColor="#E0E0E0"
                     Margin="0,20"/>

            <!-- Modify Service -->
            <VerticalStackLayout Spacing="10">
                <Label Text="Modify Existing Service"
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="#007AFF"/>

                <!-- Service Picker -->
                <Picker Title="Select Service"
                        ItemsSource="{Binding Services}"
                        SelectedItem="{Binding SelectedServiceForModification}"
                        ItemDisplayBinding="{Binding Nom}"
                        FontSize="16"
                        BackgroundColor="#F8F8F8"
                        Margin="0,5"/>

                <!-- Modify Service Name -->
                <Entry Placeholder="Enter New Service Name"
                       Text="{Binding ModifiedServiceName}"
                       FontSize="16"
                       BackgroundColor="#F8F8F8"
                       Margin="0,5"/>

                <Button Text="Modify Service"
                        Command="{Binding ModifyServiceCommand}"
                        BackgroundColor="#007AFF"
                        TextColor="White"
                        WidthRequest="150"
                        CornerRadius="10"
                        HorizontalOptions="Start"/>
            </VerticalStackLayout>

            <!-- Separator -->
            <BoxView HeightRequest="1"
                     BackgroundColor="#E0E0E0"
                     Margin="0,20"/>

            <!-- Service List -->
            <Label Text="Existing Services"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#007AFF"
                   Margin="0,5"/>

            <CollectionView ItemsSource="{Binding Services}"
                            SelectionMode="None"
                            Margin="0,10,0,20">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10"
                               Margin="0,5"
                               BackgroundColor="#F9F9F9"
                               CornerRadius="10"
                               BorderColor="#E0E0E0"
                               HasShadow="True">
                            <HorizontalStackLayout Spacing="10">
                                <Label Text="{Binding Nom}"
                                       FontSize="16"
                                       VerticalTextAlignment="Center"
                                       TextColor="#333"
                                       FontAttributes="Bold"/>
                                <Button Text="Delete"
                                        Command="{Binding BindingContext.DeleteServiceCommand, Source={RelativeSource AncestorType={x:Type toolkit:Popup}}}"
                                        CommandParameter="{Binding Id}"
                                        BackgroundColor="#FF0000"
                                        TextColor="White"
                                        WidthRequest="80"
                                        HeightRequest="40"
                                        CornerRadius="10"/>
                            </HorizontalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Close Button -->
            <Button Text="Close"
                    Command="{Binding ClosePopupCommand}"
                    BackgroundColor="#FF5722"
                    TextColor="White"
                    WidthRequest="120"
                    HeightRequest="50"
                    CornerRadius="10"
                    HorizontalOptions="Center"/>
        </VerticalStackLayout>
    </ScrollView>
</toolkit:Popup>
